{"code":"import { EntityManager } from './entity';\r\nexport default class GameLevel extends EntityManager {\r\n    constructor(...systems) {\r\n        super();\r\n        this.systems = [];\r\n        this.status = 'pending';\r\n        this.addSystem(...systems);\r\n    }\r\n    initLevel(game) {\r\n        game.sprite.addChild(this.sprite);\r\n        if (this.onLoad)\r\n            this.onLoad();\r\n    }\r\n    addSystem(...systems) {\r\n        for (const system of systems.flat()) {\r\n            this.systems.push(system);\r\n        }\r\n        return this;\r\n    }\r\n    loop() {\r\n        this.systems.forEach(system => {\r\n            const entities = this.filter(system);\r\n            if (Array.isArray(entities)) {\r\n                system.update(entities);\r\n            }\r\n        });\r\n    }\r\n    filter(system) {\r\n        if (system.type) {\r\n            return this.filterEntity(system.type);\r\n        }\r\n        if (system.filter) {\r\n            return system.filter(this.entities);\r\n        }\r\n        return this.entities;\r\n    }\r\n    finish() {\r\n        this.status = 'finished';\r\n        if (this.onFinish)\r\n            this.onFinish();\r\n    }\r\n}\r\n//# sourceMappingURL=level.js.map","references":["/Users/taugocauci/Workspace/personal/game/src/entity/index.ts","/Users/taugocauci/Workspace/personal/game/src/system.ts","/Users/taugocauci/Workspace/personal/game/src/world.ts"],"map":"{\"version\":3,\"file\":\"level.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/level.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAe,EAAE,aAAa,EAAE,MAAM,UAAU,CAAA;AAMhD,MAAM,CAAC,OAAO,OAAO,SAAU,SAAQ,aAAa;IAOlD,YAAY,GAAG,OAAiB;QAC9B,KAAK,EAAE,CAAA;QANT,YAAO,GAAa,EAAE,CAAA;QACtB,WAAM,GAAkD,SAAS,CAAA;QAM/D,IAAI,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC,CAAA;IAC5B,CAAC;IAED,SAAS,CAAC,IAAe;QACvB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QACjC,IAAI,IAAI,CAAC,MAAM;YAAE,IAAI,CAAC,MAAM,EAAE,CAAA;IAChC,CAAC;IAED,SAAS,CAAC,GAAG,OAAgC;QAC3C,KAAK,MAAM,MAAM,IAAI,OAAO,CAAC,IAAI,EAAE,EAAE;YACnC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;SAC1B;QACD,OAAO,IAAI,CAAA;IACb,CAAC;IAED,IAAI;QACF,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC5B,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;YACpC,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;gBAC3B,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;aACxB;QACH,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,MAAM,CAAC,MAAc;QACnB,IAAI,MAAM,CAAC,IAAI,EAAE;YACf,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;SACtC;QACD,IAAI,MAAM,CAAC,MAAM,EAAE;YACjB,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;SACpC;QACD,OAAO,IAAI,CAAC,QAAQ,CAAA;IACtB,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;QACzB,IAAI,IAAI,CAAC,QAAQ;YAAE,IAAI,CAAC,QAAQ,EAAE,CAAA;IACpC,CAAC;CACF\"}"}
