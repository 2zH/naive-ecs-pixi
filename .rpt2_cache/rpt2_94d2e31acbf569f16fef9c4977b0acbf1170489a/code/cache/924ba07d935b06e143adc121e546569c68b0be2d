{"code":"export default class Clock {\r\n    constructor() {\r\n        this.startTime = 0;\r\n        this.now = 0;\r\n        this.listeners = [];\r\n    }\r\n    start(startTime = Date.now()) {\r\n        this.startTime = startTime;\r\n        this.now = this.startTime;\r\n        return this;\r\n    }\r\n    updateTime(delta) {\r\n        this.now += delta;\r\n        this.listeners.forEach(listener => {\r\n            const timeout = listener.timeout / 1000 * 60;\r\n            if ((this.now - listener.startTime) < timeout) {\r\n                return;\r\n            }\r\n            listener.callbackFn();\r\n            if (listener.once) {\r\n                return this.listeners.splice(this.listeners.indexOf(listener), 1);\r\n            }\r\n            listener.startTime = this.now;\r\n        });\r\n        return this;\r\n    }\r\n    removeTimer(id) {\r\n        const index = this.listeners.findIndex(({ callbackFn }) => callbackFn === id);\r\n        if (index >= 0) {\r\n            this.listeners.splice(index, 1);\r\n        }\r\n        return this;\r\n    }\r\n    setInterval(fn, timeout) {\r\n        this.listeners.push({\r\n            startTime: this.now,\r\n            timeout,\r\n            callbackFn: fn,\r\n            once: false\r\n        });\r\n        return this;\r\n    }\r\n    setTimeout(fn, timeout) {\r\n        this.listeners.push({\r\n            startTime: this.now,\r\n            timeout,\r\n            callbackFn: fn,\r\n            once: true\r\n        });\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=clock.js.map","references":[],"map":"{\"version\":3,\"file\":\"clock.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/clock.ts\"],\"names\":[],\"mappings\":\"AAOA,MAAM,CAAC,OAAO,OAAO,KAAK;IAA1B;QACE,cAAS,GAAG,CAAC,CAAA;QACb,QAAG,GAAG,CAAC,CAAA;QACP,cAAS,GAAe,EAAE,CAAA;IAqD5B,CAAC;IAnDC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE;QAC1B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAA;QAC1B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,CAAA;QACzB,OAAO,IAAI,CAAA;IACb,CAAC;IAED,UAAU,CAAC,KAAa;QACtB,IAAI,CAAC,GAAG,IAAI,KAAK,CAAA;QACjB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YAChC,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,CAAA;YAC5C,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,SAAS,CAAC,GAAG,OAAO,EAAE;gBAC7C,OAAM;aACP;YACD,QAAQ,CAAC,UAAU,EAAE,CAAA;YACrB,IAAI,QAAQ,CAAC,IAAI,EAAE;gBACjB,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAA;aAClE;YACD,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAA;QAC/B,CAAC,CAAC,CAAA;QACF,OAAO,IAAI,CAAA;IACb,CAAC;IAED,WAAW,CAAC,EAAc;QACxB,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,UAAU,EAAE,EAAE,EAAE,CACxD,UAAU,KAAK,EAAE,CAClB,CAAA;QACD,IAAI,KAAK,IAAI,CAAC,EAAE;YACd,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;SAChC;QACD,OAAO,IAAI,CAAA;IACb,CAAC;IAED,WAAW,CAAC,EAAc,EAAE,OAAe;QACzC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;YAClB,SAAS,EAAE,IAAI,CAAC,GAAG;YACnB,OAAO;YACP,UAAU,EAAE,EAAE;YACd,IAAI,EAAE,KAAK;SACZ,CAAC,CAAA;QACF,OAAO,IAAI,CAAA;IACb,CAAC;IAED,UAAU,CAAC,EAAc,EAAE,OAAe;QACxC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;YAClB,SAAS,EAAE,IAAI,CAAC,GAAG;YACnB,OAAO;YACP,UAAU,EAAE,EAAE;YACd,IAAI,EAAE,IAAI;SACX,CAAC,CAAA;QACF,OAAO,IAAI,CAAA;IACb,CAAC;CACF\"}"}
